# Flow 1: Medication Information Query

## תיאור
לקוח שואל על תרופה ספציפית ורוצה לקבל מידע עליה.

## שלבים

### שלב 1: לקוח שואל על תרופה
**דוגמה:** "ספר לי על נורופן"

### שלב 2: Agent קורא לכלי get_medication_by_name
```
TOOL CALL: get_medication_by_name
{"name": "נורופן"}
```

### שלב 3: Agent מקבל תשובה מהכלי
```
TOOL RESPONSE: get_medication_by_name
{
  "success": true,
  "name": "נורופן",
  "name_en": "Nurofen",
  "active_ingredient": "איבופרופן",
  "strength_mg": 200,
  "available_strengths": [200, 400],
  "instructions_dosage": "למבוגרים: טבליה אחת (200-400 מ\"ג) כל 6-8 שעות...",
  "in_stock": true,
  "requires_prescription": false,
  "category": "משככי כאבים ונוגדי דלקת",
  "warnings": "לא לשימוש עם אלכוהול..."
}
```

### שלב 4: Agent מסביר ללקוח

#### תשובה בערוץ קולי (Voice):
"נורופן זמין במלאי. זו תרופה ללא מרשם למשכך כאבים ונוגד דלקת. המרכיב הפעיל הוא איבופרופן. המינון הרגיל למבוגרים הוא טבליה אחת כל שש עד שמונה שעות. חשוב לא לשלב עם אלכוהול."

#### תשובה בערוץ צ'אט (Chat):
"נורופן זמין במלאי:

**מידע כללי:**
- מרכיב פעיל: איבופרופן
- קטגוריה: משככי כאבים ונוגדי דלקת
- דרישת מרשם: לא נדרש מרשם

**חוזקים זמינים:**
- 200 מ\"ג
- 400 מ\"ג

**הוראות שימוש:**
למבוגרים: טבליה אחת (200-400 מ\"ג) כל 6-8 שעות. ניתן לקחת עם או בלי אוכל. לא לעבור 1200 מ\"ג ביום.

**אזהרות:**
לא לשימוש עם אלכוהול. להימנע בהיריון ובהנקה ללא ייעוץ רפואי."

## הבדלים בין Voice ל-Chat

| היבט | Voice | Chat |
|------|-------|------|
| אורך תשובה | תמציתי, 2-3 משפטים | מפורט, עם מבנה |
| מספרים | "שש עד שמונה שעות" | "6-8 שעות" |
| מבנה | זורם, שיחתי | רשימות, כותרות |
| פרטים | עיקרי בלבד | כל הפרטים |

## טיפול בשגיאות

### תרופה לא נמצאה
```
TOOL RESPONSE: get_medication_by_name
{
  "success": false,
  "error": "medication_not_found",
  "message": "לא נמצאה תרופה בשם \"תרופה123\" במאגר שלנו."
}
```

**תשובת Agent:**
"מצטער, לא מצאתי תרופה בשם זה במאגר שלנו. אולי יש שגיאת כתיב? אפשר לנסות שם אחר או לתאר את מה שאתה מחפש."

### שם מעורפל (מספר אפשרויות)
```
TOOL RESPONSE: get_medication_by_name
{
  "success": false,
  "error": "ambiguous_name",
  "message": "נמצאו מספר תרופות עם השם \"אקמול\". אנא ציין חוזק/ריכוז.",
  "options": [
    {"name": "אקמול", "strengths": [500, 1000]}
  ]
}
```

**תשובת Agent:**
"יש לנו אקמול במספר חוזקים: 500 מ\"ג ו-1000 מ\"ג. איזה חוזק אתה מחפש?"

## דוגמאות שיחה מלאות

### דוגמה 1: שאלה פשוטה
```
לקוח: "מה זה אקמול?"
Agent: [קורא ל-get_medication_by_name]
Agent: "אקמול זמין במלאי. זו תרופה ללא מרשם למשכך כאבים ומורידת חום. המרכיב הפעיל הוא פרצטמול."
```

### דוגמה 2: שאלה עם חוזק ספציפי
```
לקוח: "יש לכם נורופן 400?"
Agent: [קורא ל-get_medication_by_name עם strength_mg=400]
Agent: "כן, נורופן 400 מ\"ג זמין במלאי. זו תרופה ללא מרשם. המינון הרגיל הוא טבליה אחת כל 6-8 שעות."
```

### דוגמה 3: תרופה שדורשת מרשם
```
לקוח: "ספר לי על ונטולין"
Agent: [קורא ל-get_medication_by_name]
Agent: "ונטולין זמין במלאי, אבל זו תרופה הדורשת מרשם רופא. זה משאף למרחיב סימפונות. המרכיב הפעיל הוא סלבוטמול. תצטרך מרשם כדי לרכוש אותו."
```

## נקודות מפתח

1. **תמיד בדוק זמינות במלאי** - זה חלק מהמידע שהלקוח רוצה
2. **ציין אם נדרש מרשם** - זה קריטי ללקוח
3. **התאם את רמת הפירוט לערוץ** - voice תמציתי, chat מפורט
4. **כלול אזהרות חשובות** - בטיחות קודמת
5. **היה ברור לגבי מינון** - אבל אל תיתן ייעוץ רפואי